<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>D3stiny's Secret Chess Lair</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #333;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      overflow: hidden;
    }

    .chess-container {
      text-align: center;
      position: relative;
      padding: 20px;
    }

    #chess-board {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      grid-template-rows: repeat(8, 1fr);
      margin: 20px auto;
      border: 2px solid #fff;
    }

    .cell {
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 32px;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.2s ease;
    }

    .cell.white {
      background-color: #f0d9b5;
    }

    .cell.black {
      background-color: #b58863;
    }

    .cell.selected {
      background-color: #f7b731;
    }

    .cell.valid-move {
      background-color: rgba(0, 255, 0, 0.5);
    }

    .status {
      margin-top: 20px;
    }

    .game-over {
      display: none;
      text-align: center;
    }

    .move-animation {
      animation: movePiece 0.5s ease-in-out;
    }

    @media (max-width: 600px) {
      #chess-board {
        grid-template-columns: repeat(8, 1fr);
        grid-template-rows: repeat(8, 1fr);
        width: 80vw;
        height: 80vw;
      }

      .cell {
        width: 12vw;
        height: 12vw;
        font-size: 24px;
      }
    }

    @keyframes movePiece {
      0% {
        transform: scale(0);
        opacity: 0;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
  </style>
</head>
<body>
  <div class="chess-container">
    <h1>D3stiny's Secret Chess Lair</h1>
    <div id="chess-board"></div>
    <div class="status">
      <p>Turn: <span id="current-player">White</span></p>
    </div>
    <div class="game-over">
      <p id="game-result"></p>
      <button onclick="rematch()">Rematch</button>
      <button onclick="quitGame()">Quit</button>
    </div>
  </div>
  <script>
    const board = document.getElementById("chess-board");
    const currentPlayer = document.getElementById("current-player");
    const gameResult = document.getElementById("game-result");
    const gameOverDiv = document.querySelector(".game-over");
    let isWhiteTurn = true;
    let selectedPiece = null;
    let gameBoard = [
      ["♜", "♞", "♝", "♛", "♚", "♝", "♞", "♜"],
      ["♟", "♟", "♟", "♟", "♟", "♟", "♟", "♟"],
      ["", "", "", "", "", "", "", ""],
      ["", "", "", "", "", "", "", ""],
      ["", "", "", "", "", "", "", ""],
      ["", "", "", "", "", "", "", ""],
      ["♙", "♙", "♙", "♙", "♙", "♙", "♙", "♙"],
      ["♖", "♘", "♗", "♕", "♔", "♗", "♘", "♖"]
    ];

    function renderBoard() {
      board.innerHTML = '';
      for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {
          const cell = document.createElement('div');
          cell.classList.add('cell');
          cell.classList.add((row + col) % 2 === 0 ? 'white' : 'black');
          cell.setAttribute('data-row', row);
          cell.setAttribute('data-col', col);
          cell.innerText = gameBoard[row][col];
          cell.addEventListener('click', handleCellClick);
          board.appendChild(cell);
        }
      }
    }

    function handleCellClick(event) {
      const row = event.target.getAttribute('data-row');
      const col = event.target.getAttribute('data-col');
      const piece = gameBoard[row][col];

      if (selectedPiece) {
        if (event.target.classList.contains('valid-move')) {
          gameBoard[row][col] = selectedPiece.piece;
          gameBoard[selectedPiece.row][selectedPiece.col] = "";
          isWhiteTurn = !isWhiteTurn;
          currentPlayer.textContent = isWhiteTurn ? 'White' : 'Black';
          selectedPiece = null;
          renderBoard();
          checkForCheckmate();
        } else {
          selectedPiece = null;
          renderBoard();
        }
      } else if (piece !== "") {
        selectedPiece = { piece, row, col };
        highlightMoves(piece, row, col);
      }
    }

    function highlightMoves(piece, row, col) {
      const validMoves = getValidMoves(piece, row, col);
      const cells = document.querySelectorAll('.cell');
      cells.forEach(cell => {
        const r = parseInt(cell.getAttribute('data-row'));
        const c = parseInt(cell.getAttribute('data-col'));
        if (validMoves.some(move => move[0] === r && move[1] === c)) {
          cell.classList.add('valid-move');
        } else {
          cell.classList.remove('valid-move');
        }
      });
    }

    function getValidMoves(piece, row, col) {
      const moves = [];
      if (piece === "♙") { // White Pawn
        if (row > 0 && gameBoard[row - 1][col] === "") {
          moves.push([row - 1, col]);
        }
      } else if (piece === "♟") { // Black Pawn
        if (row < 7 && gameBoard[row + 1][col] === "") {
          moves.push([row + 1, col]);
        }
      }
      // Add logic for other pieces like rooks, knights, etc.
      return moves;
    }

    function checkForCheckmate() {
      // Here you would check if the king is in checkmate
      // If the king is in checkmate, trigger game over
      // For simplicity, we'll skip the checkmate logic for now
      // Example:
      // gameOver("White wins!");
      // gameOver("Black wins!");
    }

    function gameOver(result) {
      gameResult.textContent = result;
      gameOverDiv.style.display = 'block';
    }

    function rematch() {
      gameBoard = [
        ["♜", "♞", "♝", "♛", "♚", "♝", "♞", "♜"],
        ["♟", "♟", "♟", "♟", "♟", "♟", "♟", "♟"],
        ["", "", "", "", "", "", "", ""],
        ["", "", "", "", "", "", "", ""],
        ["", "", "", "", "", "", "", ""],
        ["", "", "", "", "", "", "", ""],
        ["♙", "♙", "♙", "♙", "♙", "♙", "♙", "♙"],
        ["♖", "♘", "♗", "♕", "♔", "♗", "♘", "♖"]
      ];
      isWhiteTurn = true;
      currentPlayer.textContent = 'White';
      renderBoard();
      gameOverDiv.style.display = 'none';
    }

    function quitGame() {
      window.location.reload();
    }

    // Start the game
    renderBoard();
  </script>
</body>
</html>
